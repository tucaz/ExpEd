<html>
    <head>
        <script type="text/javascript" src="lib/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="lib/js-util.js"></script>
        <script type="text/javascript" src="lib/LinkedList.js"></script>
        <script type="text/javascript"src="editor.js"></script>
        <link rel="stylesheet" href="editor.css" type="text/css" />
        <script type="text/javascript">
            $(document).ready( function () {
                var $controlsContainer = $('#controls'),
                $expressionContainer = $('#expression'),
                data = [{
                    name: 'Roles',
                    prefix: '{r=',
                    sufix: '}',
                    values: ['RoleA', 'RoleB', 'RoleC']
                },{
                    name: 'Groups',
                    prefix: '{g=',
                    sufix: '}',
                    values: ['Group1', 'Group2', 'Group3', 'Group4']
                },{
                    name: 'Attributes',
                    prefix: '{a=',
                    sufix: '}',
                    values: ['Attr1', 'Attr2']
                }],
                editor = new expEd.Editor($expressionContainer, data);

                editor.createUI($controlsContainer);                
                
                // editor.loadExpression('({r=RoleA}OR{r=Attr1})', ['OR']);
                // editor.loadExpression('({r=RoleA}OR{r=Attr1})AND{r=RoleB}', ['OR','AND']);
                // editor.loadExpression('{r=RoleA}OR{r=Attr1}AND{g=Group1}OR{r=RoleB}', ['AND','OR']);
                // editor.loadExpression('{r=RoleB}AND({r=RoleA}OR{r=Attr1})', ['OR','AND']);
                // editor.loadExpression('({r=RoleA}OR{r=Attr1})AND({r=RoleA}OR{r=Attr1})', ['OR','AND']);
                editor.loadExpression('(({a=Attr1}OR{g=Group1})AND{a=Attr1})', ['OR','AND']);

                editor.onError( function(msg) {
                    alert(msg)
                });

                $('#add-or').click( function(e) {
                    editor.addToken('|')
                });

                $('#add-and').click( function(e) {
                    editor.addToken('&')
                });

                $('#group').click( function(e) {
                    editor.groupSelected()
                });

                $('#show').click( function(e) {
                    $('#text').text(editor.toString());
                });

                $('#unselect').click( function(e) {
                    editor.unselectAll();
                });

                $('#remove').click( function(e) {
                    editor.removeSelected();
                });

                $('#clear-all').click( function(e) {
                    editor.clearAll();
                });

            });
        </script>
        <body>
            <div id="controls">
            </div>
            <div id="buttons">
                <input type="button" id="add-or" value="Add Or Operator" />
                <input type="button" id="add-and" value="Add And Operator" />
                <input type="button" id="group" value="Group/Ungroup Selected" />
                <input type="button" id="show" value="Show Expression" />
                <input type="button" id="unselect" value="Unselect All" />
                <input type="button" id="remove" value="Remove Selected" />
                <input type="button" id="clear-all" value="Clear All" />
            </div>
            <div id="expression">
            </div>
            </div>
            <div id="text">
        </body>
</html>